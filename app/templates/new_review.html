{% extends "base.html" %}
{% block content %}
<h2 class="mb-3">New Review</h2>

<form method="post" action="{{ url_for('review.new_review') }}">
  <div class="mb-3">
    <label class="form-label">Title</label>
    <input type="text" class="form-control" name="title" value="{{ title or '' }}" placeholder="Title...">
  </div>
  <div class="mb-3">
    <label class="form-label">Review</label>
    <textarea class="form-control" rows="5" name="review" placeholder="Review text...">{{ review or '' }}</textarea>
  </div>
  <div class="mb-3">
    <label class="form-label">Rating (1–5)</label>
    <input type="number" class="form-control" name="rating" min="1" max="5" value="{{ rating or '' }}">
  </div>
  <button class="btn btn-primary">Get Suggestion</button>
</form>

{% if suggested is not none %}
  <hr>
  <div class="alert alert-{{ 'success' if suggested==1 else 'secondary' }}">
    Suggestion: <b>{{ 'POSITIVE' if suggested==1 else 'NEGATIVE' }}</b>
    {% if suggested_p is not none %}
      — Confidence: <b class="prob">{{ (suggested_p*100)|round(2) }}%</b>
    {% endif %}
  </div>

  {% if per_model and per_model|length %}
    <h5>Per-Model Probabilities</h5>
    <ul class="list-group mb-3">
      {% for name, p in per_model %}
        <li class="list-group-item d-flex justify-content-between">
          <span>{{ name }}</span>
          <b class="prob">{{ (p*100)|round(2) }}%</b>
        </li>
      {% endfor %}
    </ul>
  {% endif %}
{% endif %}
{% endblock %}